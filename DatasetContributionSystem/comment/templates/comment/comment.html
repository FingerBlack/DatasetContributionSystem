{% extends 'base.html' %}
{% block title %}评论区{% endblock %}


{% block content %}
    <div class="bg-light">
    <section class="jumbotron text-center">
        <div class="container">
            <div class="py-5 text-center">
                <h2>数据集评论区</h2>
                <p class="lead">在这里，可以添加对数据集的任何评论。</p>
                <p>
                    <a href="post/" class="btn btn-primary my-2">添加评论</a>
                </p>
            </div>
        </div>
    </section>

        <div class="container">
            <div class="row">
                <table class="table">
                      <thead class="thead-dark">
                        <tr>
                            <th scope="col">序号</th>
                          <th scope="col">用户名</th>
                          <th scope="col"><centre>评论内容</centre></th>
                          <th scope="col">数据集</th>
                            <th scope="col">数据集评分</th>
                            <th scope="col">评论时间</th>
                            <th scope="col">编辑</th>
                        </tr>
                      </thead>
                      <tbody>
                        {%for item in comment%}
                            <tr id="row-{{item.id}}">
                                <th scope="row">{{ forloop.counter }}</th>
                                <td>{{ item.Username }}</td>
                                <td>{{ item.Description }}</td>
                                <td>{{ item.DatasetName.name }}</td>
                                <td>{{ item.Score }}</td>
                                <td>{{ item.Time }}</td>
                                <td><button type="button" class="btn btn-dark" {% if not request.user == item.Username %}disabled="disabled"{% endif %} onclick='
                                            $.post("/dataset/{{item.DatasetName.name}}/comment/delete/",
                                            {
                                            id:"{{item.id}}",
                                            csrfmiddlewaretoken:"{{csrf_token}}"
                                            },
                                            function(data,status){
                                            $("#row-{{item.id}}").remove();

                                            });
                                            '><i class="fas fa-trash"></i></button>
                                    <button type="button" class="btn btn-danger"><i class="fas fa-heart"></i></button></td>

                            </tr>
                        {%endfor%}
                      </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}